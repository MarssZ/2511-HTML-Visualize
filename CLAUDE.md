# 项目：结构能交互演示

## 项目定位

**一句话描述：**
用交互式网页演示"结构能"的核心概念——通过调整权重阈值，让强连接自然浮现出清晰的结构（如五角星）。

**目标用户：**
普通上班族（无技术背景，需要直观理解"消除弱连接后，强连接自然显现结构"这一概念）

**核心交互：**
拖动滑块（调整权重阈值） → 弱连接消失 → 强连接显现 → 看到五角星等几何图形浮现

---

## 技术栈

**极简原则：Less is More**

- **语言**：原生 JavaScript (ES6+)
- **渲染**：HTML5 Canvas API
- **样式**：内联 CSS（无需单独文件）
- **依赖**：零依赖（不引入任何第三方库）
- **构建**：零构建（直接用浏览器打开 `index.html`）

---

## 本地环境

- **操作系统**：Windows 11
- **工作目录**：`E:\MarssPython\2511-structure`
- **运行方式**：直接双击 `index.html` 即可在浏览器中查看

---

## 核心数据结构

```javascript
// 全部数据就这三个部分
const GRAPH = {
  // 1. 节点：10个点的坐标（手动摆放成五角星外围圆）
  nodes: [
    {id: 0, x: 250, y: 50},   // 顶点
    {id: 1, x: 400, y: 150},  // 右上
    // ... 其他8个点
  ],

  // 2. 边：所有点之间的连接权重（完全图，共45条边）
  edges: [
    {from: 0, to: 1, weight: 0.2},  // 弱连接（噪音）
    {from: 0, to: 5, weight: 0.9},  // 强连接（五角星的边）
    {from: 1, to: 6, weight: 0.9},  // 强连接
    // ... 剩余边
  ]
};

// 3. 阈值：用户通过滑块控制（0-1之间）
let threshold = 0.5;  // 只显示权重 >= 0.5 的边
```

---

## 📁 项目结构

```
E:\MarssPython\2511-structure/
├── index.html          # 唯一的HTML文件（包含全部逻辑）
├── data.js             # 数据文件（10个点 + 45条边的权重）
├── CLAUDE.md           # 本文件（项目说明，给AI和开发者看）
└── README.md           # 用户说明（给普通人看的使用指南）
```

**就这4个文件，没有更多了。**

---

## 核心实现逻辑

### 渲染函数（核心3行）

```javascript
function render(threshold) {
  ctx.clearRect(0, 0, 500, 500);  // 清屏

  // 只画权重 >= 阈值的边
  GRAPH.edges
    .filter(e => e.weight >= threshold)
    .forEach(e => drawLine(e.from, e.to, e.weight));

  // 画所有节点（永远显示）
  GRAPH.nodes.forEach(n => drawNode(n.x, n.y));
}
```

### 交互逻辑（滑块事件）

```javascript
<input type="range" min="0" max="1" step="0.01" value="0.5"
       oninput="threshold=this.value; render(threshold);">
```

**就这么简单。没有复杂的状态管理，没有框架，没有构建工具。**

---

## 开发原则（Linus 哲学）

### 1. **Good Taste：消除所有特殊情况**
- 不需要判断"是否是五角星的边"，只需要统一过滤 `weight >= threshold`
- 不需要区分"显示/隐藏"状态，只需要"重新渲染当前阈值下应该画的边"

### 2. **实用主义：解决真实问题**
- 问题：如何让普通人理解"结构能"？
- 方案：用视觉直观展示"调权重→显结构"
- 拒绝：加酷炫动画、3D效果、物理引擎等"理论完美"但实际复杂的东西

### 3. **简洁执念：如果超过3层缩进，你就完蛋了**
- 整个渲染逻辑：清屏 → 过滤 → 画边 → 画点，4步完成
- 没有嵌套循环，没有复杂条件判断

### 4. **零破坏性：向后兼容**
- 数据结构设计为"只增不改"：未来要加新功能，只需要在 `GRAPH` 里加字段
- 例如：想加"节点颜色"？加一个 `color` 字段即可，不影响现有逻辑

---

## 技术决策

### ✅ 为什么用 Canvas 而不是 SVG？
- **Canvas**：性能更好，代码更简单（直接画线）
- **SVG**：需要创建 DOM 元素，过度设计（我们不需要交互式拖动节点）

### ✅ 为什么不用 D3.js / Three.js？
- **不需要**：这是个只有10个点的静态布局，用重库是杀鸡用牛刀
- **D3.js**：适合动态布局、力导向图，我们是固定坐标
- **Three.js**：适合3D，我们是2D平面

### ✅ 为什么不用物理引擎？
- **不需要**：节点坐标是手动摆放的，不需要自动布局
- **未来如果需要**：再加也不迟（数据结构支持扩展）

---

## 数据设计逻辑

### 节点坐标：手动摆成五角星外围圆

```javascript
// 10个点均匀分布在半径200的圆上
const radius = 200;
const centerX = 250, centerY = 250;
for (let i = 0; i < 10; i++) {
  const angle = (Math.PI * 2 / 10) * i - Math.PI / 2;  // 从顶部开始
  nodes.push({
    id: i,
    x: centerX + radius * Math.cos(angle),
    y: centerY + radius * Math.sin(angle)
  });
}
```

### 边权重：强连接形成五角星，弱连接是噪音

```javascript
// 五角星的边（每个点连接到"隔一个点"的两个点）
// 例如：0→2, 2→4, 4→6, 6→8, 8→0（外环）
//      0→5, 5→10... （内部交叉）
// 这些边的权重设为 0.8-1.0

// 其余边（噪音）的权重设为 0.1-0.4
```

---

## 未来扩展（如果需要）

当前版本是**最小可行产品（MVP）**，只实现核心概念演示。未来可以按需扩展：

### 可能的扩展方向：
1. **多个预设图形**：五角星、六边形、网格等（增加 `data-*.js` 文件）
2. **节点拖动**：让用户手动调整节点位置（需要增加鼠标事件）
3. **动画过渡**：阈值变化时，边淡入淡出（需要 `requestAnimationFrame`）
4. **权重编辑**：点击边可以修改权重（需要增加交互状态）

### 扩展原则（Linus 哲学）：
- ❌ **不要**：一次性加所有功能（过度设计）
- ✅ **要**：先验证核心概念是否有效，再决定是否扩展
- ✅ **要**：每次只加一个功能，确保"不破坏现有代码"

---

## 概念来源

**"结构能"** 的详细定义和哲学思考，参见：
`F:\MarssBrain\Resources\信息晶种\概念 - 结构能.md`

核心思想：
> 结构（连接）即杠杆，配置（权重）即力量。
> 通过调整权重，让优秀的连接得以凸显，混沌中自然浮现秩序。

---

## 开发约定

1. **使用中文注释**：所有代码注释和文档用中文
2. **最小依赖原则**：不引入任何第三方库，除非绝对必要
3. **可读性优先**：代码写给人看，不是写给机器看
4. **零构建工具**：保持"双击 HTML 就能运行"的简洁性

---

## 验收标准

### ✅ 功能完整性
- [ ] 页面加载后，显示10个节点和所有权重 >= 0.5 的边
- [ ] 拖动滑块时，实时更新显示（只显示权重 >= 当前阈值的边）
- [ ] 当阈值较高时（如 0.8），只显示五角星的强连接

### ✅ 用户体验
- [ ] 普通人能在30秒内理解"调阈值→显结构"的概念
- [ ] 滑块响应流畅（无卡顿）
- [ ] 视觉清晰（节点和边能明显区分）

### ✅ 代码质量（Linus 标准）
- [ ] 整个项目少于200行代码（不含注释）
- [ ] 没有超过3层的嵌套循环或条件判断
- [ ] 数据结构设计为"只增不改"（未来扩展不破坏现有代码）

---

## 相关文档

- **README.md**：用户使用指南（如何运行、如何理解演示）
- **概念来源**：`F:\MarssBrain\Resources\信息晶种\概念 - 结构能.md`

---

## 总结

这是一个**极简主义**的交互演示项目：

- **核心数据**：10个点 + 45条边 + 1个阈值
- **核心逻辑**：过滤 + 渲染，不超过50行
- **核心价值**：让普通人30秒内理解"结构能"概念

**Remember: Less is More. 如果代码超过200行，说明方向错了。**
