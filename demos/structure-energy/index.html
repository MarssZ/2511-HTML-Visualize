<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç»“æ„èƒ½ï¼šè°ƒæ•´æƒé‡ï¼Œæ˜¾ç°ç»“æ„</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 600px;
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.6;
    }

    canvas {
      display: block;
      margin: 0 auto 20px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      background: #fafafa;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .slider-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .slider-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #555;
      font-size: 14px;
    }

    .threshold-value {
      font-weight: bold;
      color: #667eea;
      font-size: 18px;
    }

    input[type="range"] {
      width: 100%;
      height: 8px;
      border-radius: 5px;
      background: #e0e0e0;
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #667eea;
      cursor: pointer;
      transition: all 0.2s;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      background: #764ba2;
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #667eea;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
    }

    input[type="range"]::-moz-range-thumb:hover {
      transform: scale(1.2);
      background: #764ba2;
    }

    .info {
      background: #f0f4ff;
      border-left: 4px solid #667eea;
      padding: 12px;
      border-radius: 5px;
      font-size: 13px;
      color: #555;
      line-height: 1.6;
    }

    .stats {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-label {
      font-size: 12px;
      color: #888;
      margin-bottom: 5px;
    }

    .stat-value {
      font-size: 20px;
      font-weight: bold;
      color: #667eea;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ç»“æ„èƒ½ï¼šè°ƒæ•´æƒé‡ï¼Œæ˜¾ç°ç»“æ„</h1>
    <p class="subtitle">
      æ‹–åŠ¨æ»‘å—ï¼Œè§‚å¯Ÿæ··æ²Œå¦‚ä½•å˜ä¸ºç§©åº
    </p>

    <canvas id="graph" width="500" height="500"></canvas>

    <div class="controls">
      <div class="slider-group">
        <div class="slider-label">
          <span>æƒé‡é˜ˆå€¼ï¼ˆæ˜¾ç¤ºæƒé‡ â‰¥ é˜ˆå€¼çš„è¿æ¥ï¼‰</span>
          <span class="threshold-value" id="value">0.50</span>
        </div>
        <input type="range" id="slider" min="0" max="100" value="50">
      </div>

      <div class="info">
        ğŸ’¡ <strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šå½“ä½ æé«˜é˜ˆå€¼æ—¶ï¼Œå¼±è¿æ¥é€æ¸æ¶ˆå¤±ï¼Œå¼ºè¿æ¥è‡ªç„¶æµ®ç°å‡ºæ¸…æ™°çš„ç»“æ„ï¼ˆå…­è§’æ˜Ÿï¼‰ã€‚
      </div>

      <div class="stats">
        <div class="stat-item">
          <div class="stat-label">æ˜¾ç¤ºçš„è¿æ¥æ•°</div>
          <div class="stat-value" id="edgeCount">-</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">æ€»è¿æ¥æ•°</div>
          <div class="stat-value">66</div>
        </div>
      </div>
    </div>
  </div>

  <script src="data.js"></script>
  <script>
    // Canvas åˆå§‹åŒ–
    const canvas = document.getElementById('graph');
    const ctx = canvas.getContext('2d');

    // UI å…ƒç´ 
    const slider = document.getElementById('slider');
    const valueDisplay = document.getElementById('value');
    const edgeCountDisplay = document.getElementById('edgeCount');

    // å½“å‰é˜ˆå€¼ï¼ˆ0-1ä¹‹é—´ï¼‰
    let threshold = 0.5;

    // ç”»çº¿å‡½æ•°ï¼šè¿æ¥ä¸¤ä¸ªèŠ‚ç‚¹
    function drawLine(fromId, toId, weight) {
      const from = window.graphData.nodes.find(n => n.id === fromId);
      const to = window.graphData.nodes.find(n => n.id === toId);

      // æƒé‡è¶Šé«˜ï¼Œçº¿æ¡è¶Šç²—ï¼Œé¢œè‰²è¶Šæ·±
      const alpha = 0.2 + weight * 0.8;  // é€æ˜åº¦ï¼š0.2-1.0
      const lineWidth = 3;

      ctx.strokeStyle = `rgba(102, 126, 234, ${alpha})`;
      ctx.lineWidth = lineWidth;
      ctx.lineCap = 'round';

      ctx.beginPath();
      ctx.moveTo(from.x, from.y);
      ctx.lineTo(to.x, to.y);
      ctx.stroke();
    }

    // ç”»èŠ‚ç‚¹å‡½æ•°ï¼šåœ†å½¢èŠ‚ç‚¹
    function drawNode(x, y) {
      ctx.fillStyle = '#ff5722';
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 3;

      ctx.beginPath();
      ctx.arc(x, y, 8, 0, Math.PI * 2);
      ctx.fill();
      ctx.stroke();
    }

    // æ ¸å¿ƒæ¸²æŸ“å‡½æ•°ï¼šæ ¹æ®é˜ˆå€¼è¿‡æ»¤å¹¶ç»˜åˆ¶
    function render(t) {
      // æ¸…å±
      ctx.clearRect(0, 0, 500, 500);

      // è¿‡æ»¤å‡ºæƒé‡ >= é˜ˆå€¼çš„è¾¹
      const visibleEdges = window.graphData.edges.filter(e => e.weight >= t);

      // ç”»æ‰€æœ‰å¯è§çš„è¾¹
      visibleEdges.forEach(e => drawLine(e.from, e.to, e.weight));

      // ç”»æ‰€æœ‰èŠ‚ç‚¹ï¼ˆæ°¸è¿œæ˜¾ç¤ºï¼‰
      window.graphData.nodes.forEach(n => drawNode(n.x, n.y));

      // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
      edgeCountDisplay.textContent = visibleEdges.length;
    }

    // æ»‘å—äº‹ä»¶ï¼š0-100 æ˜ å°„åˆ° 0.0-1.0
    slider.addEventListener('input', function() {
      threshold = this.value / 100;
      valueDisplay.textContent = threshold.toFixed(2);
      render(threshold);
    });

    // åˆå§‹æ¸²æŸ“
    render(threshold);
  </script>
</body>
</html>
