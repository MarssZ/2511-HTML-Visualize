# CAS 分形交互网络：需求文档

## 1. 背景与目标

### 1.1 问题陈述
复杂适应系统（Complex Adaptive Systems, CAS）的核心概念是：**任何一个代理都同时处于三种交互关系中**（系统内、跨系统、跨层级）。传统的静态图表或抽象的3D立方体无法有效传达：
1. "同时"的本质 — 不是三选一，而是三者并存
2. 分形嵌套结构 — 个人→团队→公司，每一层都有这三种模式

### 1.2 目标用户
- **主要用户**：无技术背景的上班族（管理者、产品经理、创业者）
- **次要用户**：学生、研究人员、系统设计师

### 1.3 核心目标
通过**2D分形交互网络 + 3D辅助视图**，让用户：
1. 直观理解"三种交互同时存在"（一个代理连接到三类其他代理）
2. 感受分形结构（切换个人/团队/公司三个尺度）
3. 观察扰动传播（变化沿所有路径同时传播）

---

## 2. 用户故事

### 故事1：理解"同时存在"
**作为** 一名管理者
**我希望** 看到一个核心代理（我）同时连接到三种颜色的节点
**以便** 我能理解"任何代理都同时处于三个维度的交叉点"

**验收标准：**
- WHEN 打开页面 THEN SHALL 看到一个金色核心代理（你-员工）
- WHEN 页面加载 THEN SHALL 看到三圈不同颜色的节点：
  - 紫色内圈：6个同事（系统内）
  - 粉色中圈：4个外部代理（跨系统）
  - 蓝色垂直轴：4个上下级（跨层级）
- WHEN 页面加载 THEN SHALL 所有三种连接同时显示，不需要切换

---

### 故事2：体验分形结构
**作为** 一名创业者
**我希望** 切换不同的分形层级（个人/团队/公司）
**以便** 我能理解"每个层级本身都有这三种模式"

**验收标准：**
- WHEN 点击"团队"按钮 THEN SHALL 核心代理变为"你的团队（产品团队）"
- WHEN 切换到"团队"层级 THEN SHALL 节点标签变为团队名称（研发团队、设计团队等）
- WHEN 点击"公司"按钮 THEN SHALL 核心代理变为"你的公司（科技公司）"
- WHEN 切换到"公司"层级 THEN SHALL 节点标签变为公司/机构名称（同行、客户市场、董事会等）
- WHEN 切换层级 THEN SHALL 页面顶部显示"当前层级：个人/团队/公司 — 描述"

---

### 故事3：观察扰动传播
**作为** 一名产品经理
**我希望** 点击"播放扰动传播"按钮，看到波纹沿三个维度同时扩散
**以便** 我能理解"扰动会沿所有路径传播"

**验收标准：**
- WHEN 点击"播放扰动传播"按钮 THEN SHALL 从核心代理发出三圈波纹
- WHEN 波纹扩散 THEN SHALL 紫色波纹沿"系统内"路径传播
- WHEN 波纹扩散 THEN SHALL 粉色波纹沿"跨系统"路径传播
- WHEN 波纹扩散 THEN SHALL 蓝色波纹沿"跨层级"路径传播
- WHEN 波纹到达边界 THEN SHALL 自动消失
- WHEN 波纹播放中 THEN SHALL 可以再次点击按钮，重新播放

---

### 故事4：探索维度细节
**作为** 时间有限的上班族
**我希望** 悬停在某个维度（紫色/粉色/蓝色区域）时，看到该维度的详细说明
**以便** 我能快速理解每个维度的含义

**验收标准：**
- WHEN 鼠标悬停在紫色内圈区域 THEN SHALL 该维度的连线加粗，其他维度变半透明
- WHEN 悬停在紫色区域 THEN SHALL 页面下方显示"系统内/同层次"的详细说明
- WHEN 鼠标离开 THEN SHALL 所有连线恢复正常，详细说明隐藏
- WHEN 悬停在3D辅助视图时 THEN SHALL 对应的坐标轴高亮

---

### 故事5：理解3D立方体隐喻
**作为** 一名学生
**我希望** 右上角有一个旋转的3D立方体
**以便** 我能理解"立方体"是对"三维空间"的抽象隐喻

**验收标准：**
- WHEN 页面加载 THEN SHALL 右上角显示一个200x200的3D立方体
- WHEN 时间推移 THEN SHALL 立方体自动缓慢旋转
- WHEN 悬停主视图的某个维度 THEN SHALL 3D立方体的对应轴高亮
- WHEN 页面加载 THEN SHALL 立方体有三个坐标轴（X=紫色、Y=粉色、Z=蓝色）

---

## 3. 非功能需求

### 3.1 性能要求
- 主视图渲染帧率 ≥ 60fps
- 扰动动画流畅，无卡顿
- 鼠标悬停响应延迟 < 100ms

### 3.2 兼容性要求
- 支持现代浏览器（Chrome 90+, Firefox 88+, Safari 14+, Edge 90+）
- 支持 Windows/macOS/Linux
- 屏幕分辨率最小支持 1024x768

### 3.3 可用性要求
- 零学习成本：普通用户无需阅读说明即可理解
- 所有文本使用中文
- 色彩对比度符合 WCAG AA 标准
- 按钮状态有明确的视觉反馈（active状态）

### 3.4 技术约束
- **零依赖**：不引入任何第三方库（Three.js、D3.js等）
- **零构建**：双击 HTML 即可运行
- **零污染**：所有代码在单个 HTML 文件内（数据除外）

---

## 4. 功能清单

### 4.1 核心功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 2D主视图 | 显示核心代理及三种连接（700x700画布） | P0 |
| 三种维度同时显示 | 紫色内圈+粉色中圈+蓝色垂直轴 | P0 |
| 分形层级切换 | 个人/团队/公司三个按钮 | P0 |
| 扰动传播动画 | 三色波纹同时扩散 | P0 |
| 悬停高亮 | 鼠标悬停某个维度，该维度高亮 | P0 |
| 详细说明显示 | 悬停时显示维度的详细说明 | P0 |
| 3D辅助视图 | 右上角200x200旋转立方体 | P1 |
| 重置按钮 | 恢复到初始状态（个人层级） | P1 |

### 4.2 数据内容
| 层级 | 核心代理 | 系统内 | 跨系统 | 跨层级 |
|------|----------|--------|--------|--------|
| 个人 | 你（产品经理） | 6个同事 | 4个外部代理 | 4个上下级 |
| 团队 | 你的团队 | 5个其他团队 | 4个外部组织 | 4个管理层/执行小组 |
| 公司 | 你的公司 | 4个同行公司 | 4个市场主体 | 4个董事会/子公司 |

---

## 5. 未来扩展

### 5.1 短期扩展（v1.1）
- 点击任意节点，重新聚焦（递归分形）
- 节点之间的连线动画（蚂蚁线效果）
- 暂停/播放自动旋转（3D立方体）

### 5.2 长期扩展（v2.0）
- 用户自定义代理名称
- 导出当前视图为图片
- 多语言支持（英文）
- 移动端手势支持

---

## 6. 验收清单

### ✅ 核心功能
- [ ] 2D主视图正确渲染（核心代理 + 三圈节点）
- [ ] 三种连接同时显示（紫色/粉色/蓝色）
- [ ] 分形层级切换正常（个人/团队/公司）
- [ ] 扰动传播动画流畅（三色波纹）
- [ ] 悬停高亮功能正常
- [ ] 详细说明动态显示

### ✅ 视觉设计
- [ ] 配色方案符合科技感（深色背景+渐变）
- [ ] 核心代理为金色（#fbbf24）
- [ ] 三个维度颜色正确（紫#a78bfa/粉#fb7185/蓝#38bdf8）
- [ ] 字体清晰易读（无衬线字体）

### ✅ 用户体验
- [ ] 悬停时连线加粗、其他维度变半透明
- [ ] 按钮有明确的active状态（金色高亮）
- [ ] 页面顶部动态显示当前层级
- [ ] 3D辅助视图自动旋转

### ✅ 代码质量
- [ ] 核心逻辑 < 250 行
- [ ] 无超过3层的嵌套循环
- [ ] 数据与逻辑分离（data.js 独立）
- [ ] 所有注释使用中文

---

## 7. 关键指标

### 7.1 用户理解度
- 用户在使用3分钟后，能用自己的话解释"三种交互同时存在"
- 用户能举出至少一个分形层级的真实例子（个人→团队→公司）

### 7.2 交互满意度
- 扰动传播视觉冲击力 ≥ 9/10
- 分形切换流畅度 ≥ 9/10
- 信息获取便捷度 ≥ 8/10

---

## 8. 核心概念映射

### 8.1 原文概念 → 可视化实现

| 原文概念 | 可视化实现 | 技术手段 |
|----------|-----------|----------|
| "系统内或同层次" | 紫色内圈（6个同事围绕核心） | 极坐标布局，角度均分 |
| "跨系统" | 粉色中圈（4个外部代理） | 更大半径的极坐标 |
| "层级或跨层级" | 蓝色垂直轴（上下级） | 垂直布局，Y坐标±150 |
| "每个节点链接到其他三个节点" | 核心代理同时连接三圈 | Canvas线条，三种颜色 |
| "分形结构" | 三个层级（个人/团队/公司） | 按钮切换，数据重绘 |
| "扰动沿所有路径传播" | 三色波纹同时扩散 | requestAnimationFrame动画 |
| "立方体" | 右上角3D辅助视图 | 3D投影算法 |

---

## 9. 参考文献

- Holland, J. H. (1992). *Complex Adaptive Systems*. Daedalus, 121(1), 17-30.
- Miller, J. H., & Page, S. E. (2007). *Complex Adaptive Systems: An Introduction to Computational Models of Social Life*. Princeton University Press.
- 原始笔记：`F:\MarssBrain\Input\2025心动所在\251109-复杂适应系统（生命）.md`（第66-86行）
