# 需求文档：结构能演示

## 介绍

### 背景
"结构能"是一个核心概念：**结构（连接）即杠杆，配置（权重）即力量**。通过调整权重，让优秀的连接得以凸显，混沌中自然浮现秩序。

当前痛点：
- 概念过于抽象，难以向非技术人员解释
- 缺乏直观的可视化演示
- 难以让人快速理解"调整权重 → 显现结构"的核心机制

### 目标
提供一个交互式网页演示，让普通上班族（无技术背景）能在30秒内理解"结构能"的核心概念。

### MVP范围
- ✅ 显示固定的几何图形（六角星）
- ✅ 通过滑块调整权重阈值
- ✅ 实时显示/隐藏边的连接
- ❌ 不支持自定义节点位置（保留到二期）
- ❌ 不支持动画过渡（保留到二期）

---

## 需求

### 需求1：交互式权重调整 ✅ **[已实现]**
**用户故事：** 作为普通用户，我希望通过拖动滑块调整权重阈值，观察连接的显示/隐藏变化，以便理解"权重决定结构显现"的概念。

#### 验收标准
1. ✅ WHEN 用户拖动滑块 THEN 系统 SHALL 实时更新画布显示
   - 只显示权重 >= 当前阈值的边
2. ✅ WHEN 阈值较低（如 0.3）THEN 系统 SHALL 显示大量连接（混沌状态）
3. ✅ WHEN 阈值较高（如 0.8）THEN 系统 SHALL 只显示强连接（清晰的几何图形）
4. ✅ WHEN 滑块移动 THEN 系统 SHALL 在 100ms 内完成重新渲染（流畅体验）
5. ✅ 滑块范围 SHALL 为 0.0 - 1.0，步长 0.01

---

### 需求2：几何结构显现 ✅ **[已实现]**
**用户故事：** 作为用户，我希望在调整阈值到合适范围时，能看到清晰的几何图形浮现，以便直观理解"结构能"的概念。

#### 验收标准
1. ✅ WHEN 阈值设置为 0.7-0.9 THEN 系统 SHALL 显示清晰的六角星图形
   - 六角星由12条强连接边组成
2. ✅ 节点 SHALL 均匀分布在圆周上（12个点）
3. ✅ 强连接（权重 0.8-1.0）SHALL 形成六角星的边
4. ✅ 弱连接（权重 0.1-0.4）SHALL 为噪音，不形成规律图形
5. ✅ 所有节点 SHALL 始终可见（不受阈值影响）

---

### 需求3：视觉清晰度 ✅ **[已实现]**
**用户故事：** 作为用户，我希望画布上的节点和边能清晰区分，以便理解图形结构。

#### 验证标准
1. ✅ 节点 SHALL 显示为实心圆点
   - 颜色：深色（便于识别）
   - 半径：5-8 像素
2. ✅ 边 SHALL 显示为直线
   - 颜色：根据权重变化（权重越高，颜色越深）
   - 线宽：1-3 像素
3. ✅ 画布背景 SHALL 为浅色（白色或浅灰）
4. ✅ 画布尺寸 SHALL 为 500x500 像素（适合单屏显示）

---

### 需求4：阈值提示 ✅ **[已实现]**
**用户故事：** 作为用户，我希望在调整滑块时能看到当前阈值数值，以便理解不同阈值的效果。

#### 验收标准
1. ✅ WHEN 用户拖动滑块 THEN 系统 SHALL 显示当前阈值数值
   - 格式：`当前阈值: 0.75`
   - 位置：滑块旁边或画布上方
2. ✅ 阈值数值 SHALL 保留两位小数
3. ✅ WHEN 阈值改变 THEN 数值显示 SHALL 实时更新

---

### 需求5：零配置运行 ✅ **[已实现]**
**用户故事：** 作为用户，我希望能直接双击 HTML 文件就能运行演示，无需安装任何工具或依赖。

#### 验收标准
1. ✅ WHEN 用户双击 `demos/structure-energy/index.html` THEN 系统 SHALL 在浏览器中正常显示
2. ✅ 系统 SHALL NOT 依赖任何第三方库（零依赖）
3. ✅ 系统 SHALL NOT 需要本地服务器（直接用 file:// 协议运行）
4. ✅ 系统 SHALL 兼容现代浏览器（Chrome、Firefox、Safari、Edge）

---

## 技术约束

1. **零依赖**：不引入任何第三方库（React、D3.js、Three.js 等）
2. **零构建**：不使用构建工具（Webpack、Vite 等）
3. **零服务器**：直接用浏览器打开 HTML 即可运行
4. **极简代码**：核心逻辑不超过 200 行（不含注释）

---

## 非功能需求

1. **性能**：
   - 滑块调整后的重新渲染应在 100ms 内完成
   - 不阻塞页面交互

2. **用户体验**：
   - 界面简洁，无干扰元素
   - 操作响应即时（无延迟感）
   - 视觉清晰（节点和边能明显区分）

3. **可理解性**：
   - 普通人在 30 秒内能理解核心概念
   - 无需阅读文档或说明

4. **可维护性**：
   - 数据（节点坐标、边权重）与渲染逻辑分离
   - 未来扩展不破坏现有代码

---

## 未来扩展（非MVP范围）

### 二期功能
1. **多个预设图形**：五角星、正方形、网格等（用户可切换）
2. **动画过渡**：阈值变化时，边淡入淡出效果
3. **节点拖动**：让用户手动调整节点位置
4. **权重编辑**：点击边可以修改权重
5. **导出图形**：保存为图片或 SVG

### 扩展原则
- ❌ **不要**：一次性加所有功能（过度设计）
- ✅ **要**：先验证核心概念是否有效，再决定是否扩展
- ✅ **要**：每次只加一个功能，确保"不破坏现有代码"

---

## 概念来源

**"结构能"** 的详细定义和哲学思考，参见：
`F:\MarssBrain\Resources\信息晶种\概念 - 结构能.md`

核心思想：
> 结构（连接）即杠杆，配置（权重）即力量。
> 通过调整权重，让优秀的连接得以凸显，混沌中自然浮现秩序。

---

## 验收检查清单

### ✅ 功能完整性
- [x] 页面加载后，显示12个节点和所有权重 >= 0.5 的边
- [x] 拖动滑块时，实时更新显示（只显示权重 >= 当前阈值的边）
- [x] 当阈值较高时（如 0.8），只显示六角星的强连接

### ✅ 用户体验
- [x] 普通人能在30秒内理解"调阈值→显结构"的概念
- [x] 滑块响应流畅（无卡顿）
- [x] 视觉清晰（节点和边能明显区分）

### ✅ 技术质量
- [x] 整个项目少于200行代码（不含注释）
- [x] 没有超过3层的嵌套循环或条件判断
- [x] 数据结构设计为"只增不改"（未来扩展不破坏现有代码）
